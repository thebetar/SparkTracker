(()=>{var k="https://qcginwkfkawkktlmdiwa.supabase.co",m="sb_publishable_qKwdg4z8WaFaMILkWU6a8w_70UrxeQ5",n=class{constructor(e,s=0,u=0,r=null){this.name=e,this.element=r,this.scroll=s,this.duration=u,this.url=window.location.href,this.referrer=document.referrer,this.language=navigator.language||navigator.userLanguage,this.userAgent=navigator.userAgent,this.screenWidth=window.screen.width,this.screenHeight=window.screen.height,this.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}getUserId(){let e=localStorage.getItem("vonk_tracker_user_id");return e||(e=crypto.randomUUID(),localStorage.setItem("vonk_tracker_user_id",e)),e}toJSON(){return{name:this.name,url:this.url,user_id:this.getUserId(),scroll:this.scroll,duration:this.duration,timezone:this.timezone,language:this.language,referrer:this.referrer,user_agent:this.userAgent,screen_width:this.screenWidth,screen_height:this.screenHeight,element:this.element?{tagName:this.element.tagName,id:this.element.id||null,classes:this.element.className||null,text:this.element.innerText||this.element.value||null}:null}}send(){fetch(`${k}/rest/v1/events`,{method:"POST",headers:{"Content-Type":"application/json",apikey:m,Authorization:`Bearer ${m}`,Prefer:"return=minimal"},body:JSON.stringify(this.toJSON())}).catch(e=>console.error("Error sending event data:",e))}};(function(){let g=[{type:"pixel",value:100},{type:"pixel",value:500},{type:"percentage",value:50},{type:"percentage",value:100}],e=new WeakSet,s=new Set,u=Date.now(),r,i=0;function d(){return Math.round((Date.now()-u)/1e3)}function p(){document.querySelectorAll('button, a, input[type="button"], input[type="submit"]').forEach(a=>{e.has(a)||(e.add(a),a.addEventListener("click",function(l){new n("button_click",i,d(),l.currentTarget).send()}))})}function w(){let o=document.documentElement.scrollHeight,a=window.innerHeight,l=o-a,c=window.scrollY,_=l>0?Math.round(c/l*100):100;i=Math.max(i,c),g.forEach(t=>{let v=`${t.type}-${t.value}`;if(s.has(v))return;let h=!1;(t.type==="pixel"&&c>=t.value||t.type==="percentage"&&_>=t.value)&&(h=!0),h&&(s.add(v),new n(`scroll_depth_${t.type}`,t.value,d()).send())})}function f(){p(),r=setInterval(p,1e3),window.addEventListener("scroll",w),new n("page_load").send()}window.addEventListener("beforeunload",()=>{r&&clearInterval(r),new n("session_end",i,d()).send()}),window.addEventListener("load",f)})();})();
